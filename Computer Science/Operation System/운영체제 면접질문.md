### 프로세스와 스레드 차이
> 프로세스: 메모리에 올라와 실행되고 있는 프로그램의 인스턴스

> 스레드: 프로세스 내에서 동작되는 여러 실행의 흐름

프로세스는 운영체제로부터 자원을 할당받는 작업의 단위이고, 스레드는 프로세스가 할당받은 자원을 이용하는 실행의 단위이다.

프로세스는 운영체제로부터 메모리, 주소 공간 등을 할당받고 스레드는 할당받은 자원들을 내부 스레드끼리 공유하면서 실행된다.

<br>

### 멀티 프로세스 대신 멀티 스레드를 사용하는 이유
프로그램을 여러 개 키는 것보다 하나의 프로그램 안에서 여러 작업을 해결하는 것이 더 효율적이기 때문

1. 자원의 효율성 증대

  멀티 프로세스로 실행되는 작업을 멀티스레드로 할 때, 프로세스를 생산하여 자원을 할당하는 시스템 콜이 줄어듦

2. 처리 비용 감소 및 응답 시간 단축

  프로세스 간 통신(IPC)보다 스레드 간의 통신의 비용이 적음 → 스레드는 Stack 영역을 제외한 모든 메모리를 공유하기 때문

<br>

### 멀티 스레드 프로그래밍 작성 시 유의점

다수의 쓰레드가 공유 데이터에 동시에 접근하는 경우에 상호배제 또는 동기화 기법을 통해 *동시성 문제 또는 교착 상태*가 발생하지 않도록 주의해야 함

<br>

### 힙 영역과 스택영역의 차이점
크기 결정 시점, 할당과 해체 시점이 다르다.

|Stack/Heap|정의|크기 결정 시점|할당&해제|
|---|---|---|---|
|Stack|함수의 호출과 관계되는 지역변수와 매개변수가 저장되는 영역|컴파일 시 크기 결정|함수의 호출과 함께 할당되며, 함수의 호출이 종료될때 해제|
|Heap|사용자가 직접 관리할 수 있는 메모리 영역|런타임 시 크기 결정|사용자에 의해 메모리공간이 동적으로 할당되고 해제|

**+) 메모리 공간**

> 프로그램이 실행되기 위해 프로그램이 메모리에 로드가 되어야한다.

<img src="https://user-images.githubusercontent.com/24283422/121761570-89df8b00-cb6b-11eb-9bc5-489ccaa92b1d.png" width="350px">

- 코드 : 실행할 프로그램의 코드가 저장되는 텍스트 영역이다. CPU는 코드영역에서 저장된 명령어를 하나씩 가져가서 처리한다.

- 데이터: 전역변수와 정적변수가 이해 해당된다. 프로그램의 시작과 함께 할당되며 프로그램이 종료되면 소멸된다.

- 스택: 함수의 호출과 관계되는 지역변수와 매개변수가 저장되는 영역이다. 함수의 호출과 함께 할당되며, 함수의 호출이 종료될때 해제된다.

- 힙: 사용자가 직접 관리할 수 있는 메모리 영역으로 사용자에 의해 메모리공간이 동적으로 할당되고 해제된다.

<br>

### 컨텍스트 스위칭(Context Switching)이란?

인터럽트를 발생시켜 CPU에서 실행중인 task(프로세스/스레드)를 중단하고, 다른 task를 처리하기 위한 과정이다.

Context Switching는 현재 실행중인 task의 상태(Context)를 먼저 저장하고, 다음 우선순위의 task를 동작시켜 작업을 처리한 후에 이전에 저장된 task의 상태를 다시 복구한다.

> 인터럽트란 CPU가 프로세스를 실행하고 있을 때, 입출력 하드웨어 등의 장치나 예외상황이 발생하여 처리가 필요함을 CPU에게 알리는 것을 말합니다.

**+) PCB(Process Control Block)란?**

```
Context Switching하기 위해서는 각 프로세스/스레드의 상태를 알아야 한다. 그리고 Switching하기 위해서는 어떤 task(프로세스/스레드)를 어디까지 진행했는지 여부도 알아야 한다.
```

프로세스를 제어하기 위한 정보의 모음을 말한다.

프로세스가 생성될 때 PCB가 만들어져 각 프로세스는 고유의 PCB를 갖는다. (스레드는 TCB)

<br>

### 세마포어(Semaphore) vs 뮤텍스(Mutex)
뮤텍스는 Locking 메커니즘으로 락을 걸은 쓰레드만이 임계 영역을 나갈때 락을 해제할 수 있습니다.

하지만 세마포어는 Signaling 메커니즘으로 락을 걸지 않은 쓰레드도 signal을 사용해 락을 해제할 수 있습니다.

######  ✅  동기화 대상의 개수
> mutex는 1개, semaphore는 1개 이상

######  ✅  semaphore는 mutex가 될 수 있지만, mutex는 semaphore가 될 수 없다.
> 뮤텍스와 이진 세마포어

######  ✅  mutex는 소유하고 있는 스레드가 mutex를 해제할 수 있다.
> 뮤택스는 소유하고 있는 스레드가, 세마포어는 소유하고 있지 않은 스레드도 해당 세마포어를 해제할 수 있음

######  ✅  뮤텍스는 프로세스의 범위를 가져 종료될 때 자동으로 clean되고 세마포어는 파일 시스템 상 파일 형태로 존재

<br>

### 교착상태(DeadLock) 설명과 4가지 조건
프로세스가 자원을 얻지 못해 다음 처리를 하지 못하는 상태.

시스템적으로 한정된 자원을 여러 곳에서 사용하려고 할 때 발생하는 문제임.

*4가지 조건*
- 상호배제: 자원은 한번에 한 프로세스만 사용할 수 있음

- 점유대기: 최소한 하나의 자원을 점유하고 있으면서 다른 프로세스에 할당되어 사용하고 있는 자원을 추가로 점유하기 위해 대기하는 프로세스가 존재해야 함

- 비선점: 다른 프로세스에 할당된 자원은 사용이 끝날 때까지 강제로 빼앗을 수 없음

- 순환대기: 프로세스의 집합에서 순환 형태로 자원을 대기하고 있어야 함

<br>

**+) 교착상태 해결방법 4가지**
- 예방(Prevention): 교착 상태 발생 조건 중 하나를 제거하면서 해결한다 (자원 낭비 엄청 심함)

- 회피(Avoidance): 교착 상태 발생 시 피해나가는 방법 (은행원 알고리즘)

- 탐지(Detection): 자원 할당 그래프를 통해 교착 상태를 탐지함

- 복구(Recovery): 교착 상태 일으킨 프로세스를 종료하거나, 할당된 자원을 해제시켜 회복시키는 방법 (희생자의 선택-> 기아, 복귀)

<br>

### 외부 단편화와 내부 단편화란?
- 내부단편화
  - 분할된 영역이 할당된 프로그램의 크기보다 커서 사용되지 않고 남아 있는 빈 공간을 말한다.
  
  - 내부 단편화는 페이징에서 발생한다.

- 외부단편화
  - 분할된 영역이 할당될 프로그램의 크기보다 작아서 모두 빈 공간으로 남아 있는 전체 영역을 말한다.

  - 외부 단편화는 세그먼테이션에서 발생한다.

<br>

### 가상 메모리란 무엇인가?
RAM의 부족한 용량을 보완하기 위해, 각 프로그램에 실제 메모리 주소가 아닌 가상의 메모리 주소를 할당하는 방식이다.

프로세스가 동작하면서 실제 메모리에 필요한 데이터(페이지)가 없으면(=페이지 폴트) 가상메모리를 통해서 해당 데이터를 가져오게 됩니다.

이 기술은 실행 프로그램이 실제 메모리에 맞지 않을 때 특히 사용된다.

<br>

### 페이지 교체 알고리즘
- OPT(Optimal Replacement) : 최적 교체. 앞으로 가장 오랫동안 사용하지 않을 페이지 교체 (실현 가능성 희박)

- FIFO(First-in First-Out) : 메모리가 할당된 순서대로 페이지를 교체

- LRU(Least Recently Used) : 최근에 가장 오랫동안 사용하지 않은 페이지를 교체

- LFU(Least Frequently Used) : 사용 빈도가 가장 적은 페이지를 교체

- NUR(Not Used Recently) : 최근에 사용하지 않은 페이지를 교체

출처)
- 스터디 정리 내용
- [CS 기술면접 질문 - 운영체제](https://mangkyu.tistory.com/92?category=761303)
- [운영체제 면접 예상 질문](https://hyonee.tistory.com/95)
