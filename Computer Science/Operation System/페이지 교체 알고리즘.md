페이지 교체 알고리즘
==================
메모리를 관리하는 운영체제에서 페이지 부재(Page Fault)가 발생했을 때, 즉 모든 페이지 프레임이 사용되고 있을 때 새로운 페이지를 할당하기 위해 현재 할당된 페이지 중 어느 것과 교체할지를 결정하는 방법.

```
• 페이지 부재(Page Fault)란?

메모리에 적재된 페이지 중에 사용 페이지가 없을 때를 가리킨다. 시스템의 종류에 따라 약간 다를 수 있으나, 대체로는 빈 페이지가 하나도 없거나, 미리 정한 수보다 적을 때 발생한다.
```

> 페이지 : 가상 메모리를 같은 크기의 블록으로 나눈 것

> 프레임 : 물리 메모리를 페이지와 같은 크기로 나눈 것

## FIFO(First-in First-Out)
- 각 페이지가 주기억장치에 적재될 때마다 시간을 기억시켜 가장 먼저 들어와서 가장 오래 있었던 페이지를 교체하는 기법

- 이해하기 쉽고, 프로그래밍 및 설계가 간단하며, 벨레이디의 모순현상이 발생함

![image](https://user-images.githubusercontent.com/17819249/126021733-443c3303-bc09-417d-a271-5001b0176e42.png)

### 벨레이디의 모순(Belady's Anomaly)
> page frame의 수가 증가하면 더 많은 페이지를 적재할 수 있어, page fault 수가 줄어들 것이다.
하지만, 특정한 페이지에 대해서는 page frame이 증가하여도 page fault가 증가하는 현상이 발생한다.

![스크린샷 2021-07-17 오전 11 04 14](https://user-images.githubusercontent.com/17819249/126022083-bf708b29-d618-48c3-838a-0ba5fd8ca723.png)

따라서 중요한 페이지가 계속 사용될 가능성이 있음에도 불구하고 오랫동안 있었다는 이유만으로 교체되는 것은 불합리.

## OPT(Optimal Replacement, 최적 교체)
- 앞으로 가장 오랫동안 사용하지 않을 페이지를 교체하는 기법

- 각 페이지의 호출순서와 참조상황을 미리 예측해야하므로 실현 가능성이 희박

![image](https://user-images.githubusercontent.com/17819249/126021882-1b6198f1-f51f-4414-8ff9-b08786d20a2b.png)

## LRU(Least Recently Used)

- 최근에 가장 오랫동안 사용하지 않은 페이지를 교체하는 기법

- OPT의 경우 미래 예측이지만, LRU의 경우는 과거를 보고 판단하므로 실질적으로 사용이 가능한 알고리즘 (실제로도 최근에 사용하지 않은 페이지는 앞으로도 사용하지 않을 확률이 높다)

- 각 페이지마다 카운터나 스택을 두어 현시점에서 가장 오랫동안 사용하지 않은(가장 오래전에 사용된 페이지) 페이지를 교체함

- 현재 가장 많이 사용하고 있는 페이지 교체 방식

![image](https://user-images.githubusercontent.com/17819249/126022480-db46f592-4f19-43cb-b904-598efeb43693.png)

![스크린샷 2021-07-17 오전 11 13 19](https://user-images.githubusercontent.com/17819249/126022270-ac9a766b-52f4-4f35-b8d7-4b75e61d4da6.png)

## 전역 교체(Global) vs 지역 교체(Local)

![스크린샷 2021-07-17 오전 10 59 26](https://user-images.githubusercontent.com/17819249/126021983-fc4c41ff-10ed-400f-9212-4af52f3764cd.png)

실제로는 전체를 기준으로 페이지를 교체하는 것이 더 효율적이라고 함

자기 프로세스 페이지에서만 교체를 하면, 교체를 해야할 때 각각 모두 교체를 진행해야 하므로 비효율적임


### 출처
- [Crocus](https://www.crocus.co.kr/1385)
